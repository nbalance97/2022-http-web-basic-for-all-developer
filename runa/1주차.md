# 인터넷 네트워크

## OSI 7계층과 IP/TCP 프로토콜

![img.png](1주차%20img/img.png)

우리가 사용하는 네트워크 상의 다양한 통신 속에서는 OSI 7계층간의 약속된 정보 교환이 필요하다. 이러한 통신 속에서 웹 개발자로서 각 계층간의 정보를 어떻게 주고받는지에 대해 아는 것은 중요하다.

- **애플리케이션 계층(HTTP, FTP)**
  : 비즈니스 로직 혹은 특정 데이터를 만들어내는 것에 따라 생성되는 데이터 전송 계층
- **트랜스포트 계층(TCP, UDP)**
  : 물리적으로 연결, 경로 지정이 된 후 데이터를 전송하는 방법을 정의하는 계층
- **인터넷 계층(IP)**
  : 노드(컴퓨터)의 논리적 주소로 데이터를 보낼 경로를 선택하는 계층
- **네트워크 액세스 계층**
  : 실제로 랜선을 꼽는 랜카드, 랜카드 드라이버등과 같이 물리적인 영역을 표준화 하는 계층

## IP

> 네트워크 환경에서 사용하는 컴퓨터의 주소
>

### IP 패킷 정보

출발지 IP와 목적지 IP, 메시지를 넣고 던지면 IP 프로토콜 내에서 출발지와 목적지를 확인하고 목적지에 보내게 된다.

### 한계

- 비연결성
    - 패킷을 받을 대상이 없거나 서비스 불능이어도 전송됨
- 비신뢰성
    - 패킷이 큰 경우 잘라서 보낼 수 있는데, 이때 중간에 패킷이 사라질 수 있음.
    - 데이터가 굉장히 커서 쪼개서 보낸다고 하였을 때, 해당 패킷이 순서대로 도착되지 않을 수 있음.
- 프로그램 구분
    - 같은 IP를 사용하는 서버에서 통신하는 애플리케이션이 둘 이상이면?

## TCP

> 전송 제어 프로토콜 (Transmission Control Protocol)

TCP 세그먼트에 출발지 port, 목적지 port, 전송제어, 순서, 검증정보등을 넣으면서, 앞서 IP 패킷 정보가 가지고 있던 한계점을 해결할 수 있다. 현재 대부분에서는 TCP를 사용하고 있다.

### TCP의 특징

- 연결지향 = 연결을 하고 나서 진행 (3 way handshake)
    - 3 way handshake
        - syn → syn+ack → ack의 흐름으로 서로 연결이 되었는지를 확인하며 진행된다.
        - 요즘은 최적화가 되어서 마지막 ack일때 정보도 보낸다.
        - 물리적인 연결이라기보단, 논리적인 연결에 가까움.
- 순서보장
    - 중간에 잘못 들어오면 해당 부분부터 다시 보내라는 식의 내용을 보낼 수 있음.
- 신뢰성을 보장
    - 데이터가 제대로 잘 보내졌는지 정보를 알 수 있음.

→ 위와같은 내용들이 가능한 이유는 TCP 세그먼트 내에서 그러한 내용을 보내주기 때문!

## UDP

> 사용자 데이터그램 프로토콜 (User Datagram Protocol)
>

### 특징

- 기능이 거의 없다. (연결지향 X, 전달 보증 X, 순서보장 X)
- 단순하고 빠르다
- IP의 기능과 매우 유사 + PORT + [체크섬](https://ko.wikipedia.org/wiki/%EC%B2%B4%ED%81%AC%EC%84%AC) 정도
- 애플리케이션에서 추가 작업 필요
    - TCP는 프로토콜을 더 건드릴 수 없으나 UDP는 애플리케이션 내에서 최적화를 개발자가 자유롭게 할 수 있음.

+) 최근 UDP가 뜨는 이유 : TCP의 handshake 하는 시간을 줄이고 더 최적화해서 시간을 줄이기 위해

## PORT

> IP가 주소라면, PORT는 애플리케이션의 식별자와 같은 개념이다.
>

- IP - 목적지 서버를 찾는 것. (ex. 아파트)
- PORT - 서버 내의 애플리케이션을 특정하는 주소 (ex. 아파트의 동&호수)
    - 0~655535 : 할당가능
    - 0~1023: 잘 알려진 포트이므로 사용하지 않는 것이 좋음.

## DNS

> 도메인 네임 시스템(Domain Name System)
>

IP 는 기억하기 어렵고, 변경될 수도 있다. 따라서 DNS를 통해 IP 값과 도메인 값을 key/Value처럼 연결해 사람들이 읽기 쉬운 도메인 명으로 매칭하는 DNS 서버가 존재한다.

![img_1.png](1주차%20img/img_1.png)

# URI와 웹 브라우저 요청 흐름

## URI, URL, URN

> URI (Uniform Resource Identifier)
>
> Uniform : 리소스를 식별하는 통일된 방식
>
> Resource : 자원, URI로 식별가능한 모든 것
>
> Identifier : 다른 항목과 구분하는데 필요한 정보

![img_2.png](1주차%20img/img_2.png)

- URL(Locator) : 리소스가 있는 위치를 지정
    - ex. [http://example/runa](http://example/runa)
- URN(Name) : 리소스의 이름을 부여 (거의 사용하지 않는다.)
    - ex. urn:example:runa

## URL

> **Format** : shceme://[userinfo@]host[:port][/path][?query][#fragment]
>
> **Example** : [https://www.google.com:433/search?q=hello&hl=ko](https://www.google.com:433/search?q=hello&hl=ko)

- **scheme** : 주로 프로토콜(어떤 방식으로 자원에 접근하는 것인가에 대한 규칙) 사용
    - ex) http(80포트), https(443포트)
- **userinfo** : 사용자 정보를 포함해서 인증할때 사용되나, 거의 사용 X
- **host** : 도메인명 또는 IP
- **port** : 포트 (일반적으로 생략됨)
- **path** : 리소스 경로, 계층적 구조로 구성됨.
- **query** : key=value 형태
    - ?로 시작, &로 추가 가능.
    - query parameter, query string 등으로 불림, 웹서버에 제공하는 파라미터나 문자의 형태.
- **fragment**: html내의 북마크 등에 사용되며 서버에 전송되는 정보가 아님
    - ex) https://ko.wikipedia.org/wiki/즐겨찾기**#같이_보기**

# 공유하고 싶은 내용

- [TCP UDP의 자세한 차이점 - 테코톡](https://www.youtube.com/watch?v=ikDVGYp5dhg)
- OSI 7계층을 나눈 이유는 무엇일까?
  - 이렇게 계층을 나눈 이유는 통신이 일어는 과정을 단계별로 파악할 수 있기 때문이다. 더불어 특정한 곳에 이상이 생겼을 때 이상이 생긴 단계만 고칠 수 있다는 장점을 갖고 있다.
- (개인적인 궁금증) OSI 7계층이 나누어져있는데 왜 TCP/IP 4(5)계층이 따로 있는걸까?
  - [관련 블로그 포스팅](https://velog.io/@jwkim/cs-nw-osi-tcp-ip)